@model List<AccessControl.Models.Usuario>
@{
    ViewBag.Title = "Consultar";
    ViewBag.Legend = "CONSULTA";
    var obj = new AccessControl.Models.ObjsTest();
}

<script type="text/javascript" language="javascript">
    function loaderOn() {
        $("#load").css("display", "normal");
        $("#faca").css("display", "none");
    }
    function loaderOff() {
        $("#load").css("display", "none");
        $("#faca").css("display", "normal");
    }
</script>

@using (Ajax.BeginForm("Consultar", "Administracao",
                new AjaxOptions
                {
                    HttpMethod = "Get",
                    InsertionMode = InsertionMode.Replace,
                    UpdateTargetId = "resultado",
                    LoadingElementId = "load",
                    OnBegin = "loaderOn",
                    OnSuccess = "loaderOff"
                }))
{
    <fieldset>
        <legend>@Html.TextBox("busca")<input type="submit" value="Pesquisar" /></legend>
        <div id="load" style="display: none; text-align: center">
            <img src="~/Content/images/loader.gif" />
        </div>
        <div id="resultado">
            @if (Model.Count == 0)
            {
                <center><h2 id="faca">Faça sua pesquisa!</h2></center>
            }
            else
            {
                @Html.Partial("_Resultado", Model)
            }
        </div>
    </fieldset>
}
@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
}